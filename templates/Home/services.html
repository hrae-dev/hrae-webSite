{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% trans "Nos Services - HRAE" %}{% endblock %}

{% block content %}

<!-- Hero Section -->
<div class="bg-blue-600 text-white py-12 sm:py-16 md:py-20 lg:py-24 mt-10 md:mt-16">
    <div class="container mx-auto px-4 sm:px-6 max-w-7xl">
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-black mb-4">
            <span class="inline-block relative">
                <span class="relative z-10">{% trans "S" %}</span>
                <span class="absolute bottom-0 left-0 right-0 h-1 bg-white"></span>
            </span>{% trans "ervices et sp√©cialit√©s" %}
        </h1>
        <p class="text-base md:text-lg text-blue-100 max-w-3xl">
            {% trans "Notre actualit√© est ponctu√©e de campagnes de sant√© et autes √©venements, toute l'ann√©e." %}
        </p>
    </div>
</div>

<!-- Search & Filter Section -->
<div class="bg-white shadow-sm border-b">
    <div class="container mx-auto px-4 sm:px-6 py-4 sm:py-6 max-w-7xl">
        <form method="get" class="flex flex-col sm:flex-row gap-4">
            <!-- Category Dropdown -->
            <select name="category" class="px-4 sm:px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition bg-white appearance-none cursor-pointer w-full sm:w-auto sm:min-w-[200px] text-sm md:text-base">
                <option value="">üè• {% trans "Toutes les cat√©gories" %}</option>
                {% for category in categories %}
                <option value="{{ category.id }}" {% if request.GET.category == category.id|stringformat:"i" %}selected{% endif %}>
                    {{ category.name }}
                </option>
                {% endfor %}
            </select>
            
            <!-- Search Input -->
            <div class="flex-1 relative">
                <input type="text" 
                       name="search" 
                       placeholder="{% trans 'Search' %}" 
                       class="w-full pl-12 pr-6 py-3 bg-gray-100 border-0 rounded-lg focus:ring-2 focus:ring-blue-500 focus:bg-white transition"
                       value="{{ request.GET.search }}">
                <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </div>
            
            <!-- Search Button -->
            <button type="submit" class="bg-orange-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-orange-600 transition shadow-lg whitespace-nowrap">
                {% trans "Rechercher" %}
            </button>
        </form>
    </div>
</div>

<!-- Services Section -->
<section class="py-12 sm:py-16 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6 max-w-7xl">
        <h2 class="text-3xl md:text-4xl font-black mb-12">
            <span class="inline-block relative">
                <span class="relative z-10">{% trans "D" %}</span>
                <span class="absolute bottom-0 left-0 right-0 h-1 bg-orange-500"></span>
            </span>{% trans "iff√©rents services hospitaliers" %}
        </h2>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8">
            {% for service in services %}
            <a href="{% url 'service_detail' service.slug %}" class="relative block group aspect-[3/4]">
                
                <!-- Left black strip: 1/3 width, full height, offset to left -->
                <div class="absolute -bottom-1 -left-1 w-1/3 h-1/3 bg-black rounded-3xl"></div>
                
                <!-- Main white card - positioned above black with z-10 -->
                <div class="relative bg-white rounded-3xl shadow-lg group-hover:shadow-xl group-hover:-translate-y-1 transition-all duration-300 p-6 flex flex-col h-full w-full z-10">
                    <!-- Icon - Centered -->
                    <div class="flex justify-center mb-4">
                        {% if service.icon %}
                        <div class="text-4xl md:text-5xl text-gray-800">
                            <i class="fas {{ service.icon }}"></i>
                        </div>
                        {% else %}
                        <!-- Default SVG icon if no Font Awesome -->
                        <svg class="w-12 h-12 md:w-16 md:h-16 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                        </svg>
                        {% endif %}
                    </div>
                    
                    <!-- Badge and Title -->
                    <div class="flex items-center gap-2 mb-3">
                        <div class="w-10 h-10 md:w-12 md:h-12 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0">
                            <span class="text-white font-bold text-sm md:text-base">{{ forloop.counter|stringformat:"02d" }}</span>
                        </div>
                        <h3 class="text-base md:text-lg font-bold text-gray-900 leading-tight flex-1 group-hover:text-blue-600 transition-colors">{{ service.name }}</h3>
                    </div>
                    
                    <!-- Description -->
                    <p class="text-gray-600 text-xs md:text-sm mb-4 leading-relaxed line-clamp-3 flex-grow">
                        {{ service.short_description|default:"Soins de sant√© de base pour tous : diagnostic, traitement..." }}
                    </p>
                    
                    <!-- Additional Info (if available) -->
                    {% if service.consultation_hours or service.contact_phone %}
                    <div class="space-y-1.5 mb-4 text-xs text-gray-500">
                        {% if service.consultation_hours %}
                        <p class="flex items-center gap-1.5">
                            <svg class="w-3.5 h-3.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <span class="truncate">{{ service.consultation_hours }}</span>
                        </p>
                        {% endif %}
                        
                        {% if service.contact_phone %}
                        <p class="flex items-center gap-1.5">
                            <svg class="w-3.5 h-3.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                            <span class="truncate">{{ service.contact_phone }}</span>
                        </p>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    <!-- Subtle Link indicator -->
                    <div class="text-blue-600 group-hover:text-blue-800 font-medium text-xs md:text-sm flex items-center gap-2 transition-colors mt-auto">
                        <span>{% trans "Voir plus" %}</span>
                        <svg class="w-3.5 h-3.5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
                        </svg>
                    </div>
                </div>
            </a>
            {% empty %}
            <div class="col-span-full text-center py-12">
                <div class="text-gray-400 mb-4">
                    <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                    </svg>
                </div>
                <p class="text-gray-500 text-lg">{% trans "Aucun service disponible pour le moment" %}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}